<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Minhas Faturas</title>
  <style>
    body { background: #161616; color: #FFD600; font-family: Arial, sans-serif;}
    .container { background: #222; border: 2.5px solid #FFD600; border-radius: 20px; max-width: 900px; margin: 48px auto; padding: 34px 34px 44px; box-shadow: 0 2px 10px #000b;}
    .logo img { width: 70px; margin-bottom: 10px;}
    h2 { text-align: center; margin-bottom: 24px; font-size: 2.1rem;}
    .top-links { text-align: right; margin-bottom: 18px;}
    .top-links a { color: #FFD600; text-decoration: underline; font-weight: bold; margin-left: 22px; font-size: 1.12rem;}
    table { width: 100%; margin-top: 8px; border-collapse: collapse; color: #FFD600;}
    th, td { border-bottom: 1.5px solid #FFD600; padding: 10px 5px; text-align: center;}
    th { background: #222; font-size: 1.08rem; }
    td { background: #222;}
    .acoes a { color: #FFD600; font-weight: bold; text-decoration: underline; margin: 0 10px;}
    .flash { margin-top: 8px; padding: 7px; background: #161616; color: #FFD600; border-radius: 5px; border: 1px solid #FFD600; text-align: center;}
  </style>
</head>
<body>
  <div class="container">
    <div class="logo">
      <img src="{{ url_for('static', filename='bitbat_logo.png') }}" alt="BitBat Logo">
    </div>

    <div class="top-links">
      <a href="{{ url_for('upload') }}">Nova Fatura</a>
      <a href="{{ url_for('dashboard_geral') }}">Dashboard Geral</a>
      <a href="{{ url_for('logout') }}">Sair</a>
    </div>

    <h2>Minhas Faturas</h2>

    <table>
      <tr>
        <th>Arquivo</th>
        <th>Data</th>
        <th>Ações</th>
      </tr>

      {% if faturas %}
        {% for f in faturas %}
        <tr>
          <td>{{ f['nome_arquivo'] }}</td>
          <td>{{ f['data_upload'] }}</td>
          <td class="acoes">
            <a href="{{ url_for('relatorio', nome_arquivo=f['nome_arquivo']) }}">Ver Relatório</a>
            <a href="{{ url_for('remover', nome_arquivo=f['nome_arquivo']) }}">Remover</a>
          </td>
        </tr>
        {% endfor %}
      {% else %}
        <tr>
          <td colspan="3">Nenhuma fatura cadastrada.</td>
        </tr>
      {% endif %}
    </table>

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, message in messages %}
          <div class="flash">{{ message }}</div>
        {% endfor %}
      {% endif %}
    {% endwith %}

  </div>
</body>
</html>
